---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.mlhframework:mlh_interview_framework.yml
---
metadata:
  title: |
    Notice of Hearing and Motion
  short title: |
    Motion and Hearing
  description: |-
    Use this form to file a motion in an existing case if no more specific form is available.
  original_form:
    - https://www.courts.michigan.gov/4a2c89/siteassets/forms/scao-approved/mc326.pdf
  allowed courts: 
    - "Circuit Court"
    - "District Court"
  tags:
  # Could tag this with legal subject areas
    - "Various"
  authors:
    - Michigan Legal Help
  typical role: "unknown"
  al_weaver_version: "1.7.0"
  generated on: "2022-08-19"
---
  # overflow--sets default message
  code: |
    AL_DEFAULT_OVERFLOW_MESSAGE = " [PLEASE SEE ATTACHMENT.]"
---
code: |
  github_repo_name = 'docassemble-Simpmotion'
---
code: |
  interview_short_title = "File a Notice of Hearing and Motion in your case"
---
code: |
  al_form_type = "existing_case" 
---
objects:
  #default way to gather is by asking are there any, and then is there another, so if don't say anything it just does that.  Adding ".using(ask_number=True)" makes it ask for number instead.  Must then set target number somewhere.  
  # https://suffolklitlab.org/legal-tech-class/docs/repeated-information
  - users: ALPeopleList.using(auto_gather=True, complete_attribute="completed")
  - other_parties: ALPeopleList.using(auto_gather=True, ask_number=True, complete_attribute="completed")
  - other_party_attorney: ALPeopleList.using(ask_number=True, auto_gather=True)
  - trial_court: Organization
  - judge: ALPeopleList.using(ask_number=True,target_number=1)
  # telling interview to look to mlhframework package for source spreadsheet
  - court_list: ALCourtLoader.using(file_name='docassemble.mlhframework:data/sources/michigan_court_info.xlsx')
---
if: i > 0
code: |
  # Edit button will automatically try to fill in this info, that we don't actually need
  users[i].address.address = ""
  users[i].phone_number = ""
---
if: i > 0
code: |
  other_parties[i].address.address = ""
  other_parties[i].phone_number = ""
---
code: |
  users[i].name.first
  if i == 0:
    users[i].address.address
    users[i].phone_number
  else:
    users[i].address.address = ""
    users[i].phone_number = ""
  users[i].completed = True
---
code: |
  other_parties[i].name.first
  other_parties[i].completed = True
---
code: |
  other_party_attorney[i].name.first
  other_party_attorney[i].phone_number
  other_party_attorney[i].address.address
  other_party_attorney[i].bar_number
---
if: len(other_parties) == 0
code: |
    other_party_attorney.target_number = 0
---
# assumes the user has no attorney
code: |
  if user_started_case:
    plaintiffs_attorney = DAEmpty('plaintiffs_attorney')
    defendants_attorney = other_party_attorney
  else:
    defendants_attorney = DAEmpty('defendants_attorney')
    plaintiffs_attorney = other_party_attorney
---
 # assumes there is a plaintiff/petitioner if user is defendant/respondent
code: |
  if user_started_case == False:
    other_parties.there_are_any = True
---
id: sets labels to use for parties in text
code: |
  if user_ask_role == 'plaintiff':
    other_side_label = word('defendant or respondent')
    other_side_label_plural = word('defendants or respondents')
    user_label = word('plaintiff or petitioner')
    user_label_plural = word('plaintiffs or petitioners')
  elif user_ask_role == 'defendant':
    other_side_label = word('plaintiff or petitioner')
    other_side_label_plural = word('plaintiffs or petitioners')
    user_label = word('defendant or respondent')
    user_label_plural = word('defendants or respondents')
---
sections:
  - review_simpmotion: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_simpmotion
code: |
  # Set the allowed courts for this interview
  allowed_courts = all_variables(special="metadata")["allowed courts"]
  nav.set_section('review_simpmotion')
  welcome
  using_this_tool
  navigation_and_saving
  if not pii_policy:
    pii_policy_exit
  if not existing_case:
    existing_case_exit
  set_progress(11)
  if probate_case == True:
    probate_case_exit
  if not right_tool:
    right_tool_exit
  if approved_form == True:
    approved_form_exit
  speak_to_lawyer
  user_ask_role
  user_label
  set_progress(22)
  users.gather()
  # this interview already tells us to assume user has no attorney, so presuming that here too
  review_screen_user_side
  # presents correct version of multiple_other_parties screen depending on user role
  set_progress(33)
  other_parties.gather()
  other_party_attorney.gather()
  set_progress(44)
  set_progress(55)
  if len(other_parties) > 0 and len(other_party_attorney) == 0:
    other_parties[0].address.address
    other_parties[0].phone_number
  review_screen_other_side
  set_progress(66)
  docket_number
  # trial_court
  # Bryce added below as placeholder to be replaced by something for Michigan courts later?
  trial_court.name.text = "Trial Court"
  county_choice
  court_index
  #calling value of the_court to load AL_court_loader object
  the_court
  set_progress(77)
  motion_title
  motion_body
  has_hearing_info
  if has_hearing_info == True:
    hearing_at_court
    hearing_time
    judge.name
    trial_court_bar_number
  if has_hearing_info == False:
    no_hearing_info_ok
  set_progress(88)
  set_parts(subtitle=str(users))
  if esign == True:
    signature_date
  plaintiffs
  defendants
  plaintiffs_attorney
  defendants_attorney
  interview_order_simpmotion = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  # the below has some good ideas in it, but taking out for now and just stealing the ideas
  # al_intro_screen
  # simpmotion_intro
  interview_order_simpmotion
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  simpmotion_download
---
comment: |
  This question is used to introduce your interview. Please customize
id: Motion_and_Notice_of_Hearing
continue button field: simpmotion_intro
question: |
  Notice of Hearing and Motion
subquestion: |
  You will need information about you case, the parties, and what you want the court to do.
---
id: Welcome
question: |
  Welcome
subquestion: |
  **Welcome to Michigan Legal Help's Do-It-Yourself Notice of Hearing and Motion.** This tool will help you prepare a Notice of Hearing and Motion. 
  
  Use this tool if you already have a court case and you need to ask the judge to do something in that case. 
  
  This tool does not cover all situations. If you find this tool is not right for you, use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) to search for a lawyer or legal services in your area.
  
  If you want to go back to an interview you started before, make sure you are logged in. Then go to the menu at the top of the screen and select "My Interviews"
  
  Tap the {green words} in any screen for a definition or more information.
terms:
  green words: |
    Green words are legal terms or a short way of referring to something that needs more explanation. The definition or explanation pops up when you tap the green words.
continue button field: welcome
---
id: Using this Tool
question: |
  Using this Tool
subquestion: |
  This tool can help you prepare a Notice of Hearing and Motion form in 3 steps:
  
  **Step 1.** Answer questions that will fill in your form for you.  It should take you between 15 and 30 minutes to answer all the questions.
  
  **Step 2.** Preview the completed form.
  
  **Step 3.** Download and save the final form. Your personalized Notice of Hearing and Motion along with a checklist of step-by-step instructions will be ready after you have answered all the questions. 
  
  **You will need to file the finished form in court on your own.** We will provide directions when you are finished with the form.
  
continue button field: using_this_tool
---
id: Navigation and Saving Your Form
question: |
  Navigation and Saving Your Form
subquestion: |
  If you make a mistake at any time, you can use the Undo button below to go back. You can also see and edit some of your earlier answers by clicking on the "Review your answers" button. If you can't finish today, you can save your answers by creating a username and password. This lets you log back into the site later and finish, or go back and change any of your answers. 
  
  If you want to go back to an interview you started before, make sure you are logged in. Then go to the menu at the top of the screen and select “My Interviews”
  
  Make note of your username and password.
continue button field: navigation_and_saving
---
id: Private Information
question: |
  Private Information
subquestion: |
  To protect privacy, you **cannot** include personal identifying information in public documents that are filed in court. Personal identifying information includes:
 
  * Date of birth
  * Social security or national identification number
  * Driver’s license or state identification number
  * Passport number
  * Financial account numbers
  
  **If a question doesn't specifically ask for personal identifying information, do not include it in your answers.** If this type of information is needed, this tool will specifically ask for the information and it will go on a separate non-public form that you will file along with the other documents. This DIY tool will automatically produce that form if you need it.  
  
  Do you understand that you should only enter personal identifying information if this tool specifically asks for it?
yesno: pii_policy
---
event: pii_policy_exit
question: |
  You cannot continue to use the tool.
subquestion: |
  You cannot continue with this tool unless you understand that you should not enter any personal identifying information that the tool does not specifically ask for. 
  
  If you made a mistake, click the **Undo** button. Otherwise, click the **Exit** button to return to Michigan Legal Help.
buttons:
  - Exit: exit
    url: https://michiganlegalhelp.org
---
id: You Must Already Have a Court Case to Use This Tool
question: |
  You Must Already Have a Court Case to Use This Tool
subquestion: |
  A motion is a way to ask a judge to do something in an existing court case. You **cannot use a motion to start a new case**. You will need information such as the judge, court, and case number of the ongoing case to fill out a motion. It will help if you have other documents from the case (like the complaint, petition, or answer) nearby so you can look for information there. 
  
  Do you have an existing case in a Michigan court?
yesno: existing_case
---
event: existing_case_exit
question: |
  You cannot continue to use the tool.
subquestion: |
  Based on your answer, you can't use this tool to make a Notice of Hearing and Motion. You must already have a case in court to file a motion. Michigan Legal Help may have information about starting the kind of case you need. Use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) to search for information or to find a lawyer or legal services in your area. 
  
  If you made a mistake, click the **Undo** button. Otherwise, click the **Exit** button to return to Michigan Legal Help.
buttons:
  - Exit: exit
    url: https://michiganlegalhelp.org
---
id: Is this a probate case
question: |
  Are you Filing in a Probate Case?
subquestion: |
  Is the case a probate case? Examples of probate cases include cases to distribute property after someone dies, guardianships, and conservatorships. 

  If you are not sure if you have a probate case, look for a court document from the case. The top of each court document has information about the case. This will often list whether the court is a probate court. You can also check the two-letter case-type code at the end of the case number. To see a full list of the probate case codes visit [the State Court Administrative Office list of case-type codes](https://www.courts.michigan.gov/siteassets/court-administration/standardsguidelines/casefile/cf_casetypecodes.pdf) and scroll down to the “Probate” section.

  Is your case a probate case?
yesno: probate_case
---
event: probate_case_exit
question: |
  You cannot continue to use the tool.
subquestion: |
  Based on your answer, you can't use this tool to make a Notice of Hearing and Motion. Probate cases have different procedural rules than other cases. You may want to speak to a lawyer. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) to find a lawyer or legal services office in your area.
  
  If you made a mistake, click the **Undo** button. Otherwise, click the **Exit** button to return to Michigan Legal Help.
buttons:
  - Exit: exit
    url: https://michiganlegalhelp.org
--- 
id: Make Sure this Tool is Right for Your Situation
question: |
  Make Sure this Tool is Right for Your Situation
subquestion: |
  This tool will help you prepare a general motion if there is not a more specific form to use. There are some types of motions that have specific requirements. 
  
  Michigan Legal Help has some tools to help you draft more specific motions. **The more specific tools will help you make sure that you do the best job you can of meeting the requirements of that kind of motion. If there is a specific tool, you should use that tool instead of this one.** Check the tools at the link below carefully to find out if there is a specific motion tool you should use:
  
  **Follow this [link to a list of all the tools on Michigan Legal Help](https://michiganlegalhelp.org/all-forms).**
  
  Do any of the tools on that page fit what you are trying to do?
noyes: right_tool
---
event: right_tool_exit
question: |
  You cannot continue to use the tool.
subquestion: |
  This tool is not right for you. Please use the tool from [this page](https://michiganlegalhelp.org/all-forms) that applies to you instead. 
  
  If you made a mistake, click the **Undo** button. Otherwise, click the **Exit** button to return to Michigan Legal Help.
buttons:
  - Exit: exit
    url: https://michiganlegalhelp.org
---
id: Check for SCAO Approved Forms
question: |
  Check for SCAO-Approved Forms
subquestion: |
  The State Court Administrative Office (SCAO) has court forms for some kinds of motions. Follow this [link to the list of SCAO-approved forms](https://www.courts.michigan.gov/SCAO-forms/#Index) to find out if they have a form for the kind of request you need in your case. 
  
  Did you find a form that applies to your case?
yesno: approved_form
---
event: approved_form_exit
question: |
  You cannot continue to use the tool.
subquestion: |
  This tool is not right for you. Instead of using this tool to prepare a motion, please use the SCAO-approved form that applies to your case. 
  
  If you made a mistake, click the **Undo** button. Otherwise, click the **Exit** button to return to Michigan Legal Help.
buttons:
  - Exit: exit
    url: https://michiganlegalhelp.org
---
id: You May Want to Speak with a Lawyer
question: |
  You May Want to Speak with a Lawyer
subquestion: |
  This tool will help you to fill out a Notice of Hearing and Motion. There are many kinds of motions. Some have specific things you need to prove, and if you do not meet all of the requirements the judge will not grant your motion. 
  
  This tool will **not** guide you through the legal elements that you would need to show to have a judge grant your motion because that depends on the kind of case and kind of motion you are filing. This tool will only help you fill in the form. What you write and argue is up to you.
  
  You may want to speak to a lawyer. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) to find a lawyer or legal services office in your area if you want more help.
continue button field: speak_to_lawyer
---
id: what is the user s role?
comment: |
  This question is asked if the interview can be used by both a Plaintiff and a Defendant. It sets the value of `user_ask_role`, `plaintiffs`, `defendants`, `petitioners` and `respondents`.  If you know your interview is exclusively used by the Plaintiff or Defendant, set `user_ask_role = 'plaintiff'` or `user_ask_role='defendant'` in your code.
question: |
  What party are you in your existing case?
subquestion: |
  For **this** Notice of Hearing and Motion form you are called the “moving party” because you are filing the motion.  
  
  For your whole case, you are either the Plaintiff, the Defendant, the Petitioner, or the Respondent. 
  
  What party are you in your case?
  ${ collapse_template(help_user_ask_role_template) }
# abortive attempt to get more specific on user role below, leaving for now
# field: user_role
# dropdown:
#   - Plaintiff
#   - Petitioner
#   # - Defendant
#   - Respondent
# ---
# code: |
#   if user_role == 'Plaintiff':
#     plaintiffs = users
#     defendants = other_parties
#     user_started_case = True
#   elif user_role == 'Petitioner':
#     petitioners = users
#     respondents = other_parties
#     user_started_case = True
#   elif user_role == 'Defendant':
#     defendants = users
#     plaintiffs = other_parties
#     user_started_case = False
#   elif user_role == 'Respondent':
#     respondents = users
#     petitioners = other_parties
#     user_started_case = False
fields: 
  - no label: user_ask_role
    datatype: radio
    choices:
      - I am the Plaintiff or Petitioner: plaintiff
      - I am the Defendant or Respondent: defendant
  - note: |
      Okay, you are the **Plaintiff** or **Petitioner** in this case. The other 
      side is the Defendant or Respondent.
    show if:
      variable: user_ask_role
      is: "plaintiff"
  - note: |
      Okay, you are the **Defendant** or **Respondent** in this case. The other 
      side is the Plaintiff or Petitioner.
    show if:
      variable: user_ask_role
      is: "defendant"
 # commented out because using different gather method
 # ---
 # id: any other opposing parties
 # question: |
 #   % if users==plaintiffs:
 #   Is there any other defendant or respondent in this case?
 #   % else:
 #   Is there any other plaintiff or petitioner in this case?
 #   % endif
 # fields:
 #   - no label: other_parties.there_is_another
 #     datatype: yesnoradio
---
template: help_user_ask_role_template
subject: |
  How do I know?
content: |
  You can find the parties by looking at the first page of an existing court document, like a complaint, petition, or answer. The top of the first page is the “caption” which has the basic case information. This area will list all of the parties in the case with their titles.

  If you were the first person to file a form to start this case, you are the "Plaintiff" or the "Petitioner."  If someone else started this case by filing in court, you
  are the "Defendant" or the "Respondent." 
---
sets:
  - other_parties[i].name.first
  - other_parties[i].name.last
  - other_parties[i].name.middle
  - other_parties[i].name.suffix
id: names of opposing parties
question: |
  % if users==plaintiffs:
  What is the name of the ${ ordinal(i) } defendant or respondent?
  % else:
  What is the name of the ${ ordinal(i) } plaintiff or petitioner?
  % endif
fields:
  - code: |
      other_parties[i].name_fields(person_or_business='unsure')
---
sets:
  - other_party_attorney[i].name.first
  - other_party_attorney[i].name.last
  - other_party_attorney[i].name.middle
  - other_party_attorney[i].name.suffix
id: names of defendant s attorney
question: |
  % if user_started_case:
  Name of defendant or respondent lawyer
  % else:
  Name of plaintiff or petitioner lawyer
  % endif
fields:
  - code: |
      other_party_attorney[i].name_fields()
---
 # commented out because using different gather method now
 # id: any other users
 # question: |
 #   % if al_form_type in ['starts_case','existing_case','appeal']:
 #   % if users==plaintiffs:
 #   Is there any other plaintiff or petitioner in this case?
 #   % else:
 #   Is there any other defendant or respondent in this case?
 #   % endif  
 #   % else:
 #   Is anyone else adding their name to this form with you?
 #   % endif
 # subquestion: |
 #   % if len(users.elements) > 1:  
 #   So far you have told us about ${comma_and_list(users.complete_elements())}.
 #   % endif
 # fields:
 #   - no label: users.there_is_another
 #     datatype: yesnoradio
 # ---
sets:
  - users[i].name.first
  - users[i].name.last
  - users[i].name.middle
  - users[i].name.suffix    
id: other users names
question: |
  % if users==plaintiffs:
  Who is the ${ ordinal(i) } plaintiff or petitioner?
  % else:
  Who is the ${ ordinal(i) } defendant or respondent?
  % endif  
fields:
  - code: |
      users[i].name_fields()
---
 #saved copy of how was doing this before--useful if don't need to limit number of attorneys and want to use default gather method
# id: other party has attorney
 # question: |
 #   % if users==plaintiffs:
 #   % if len(other_parties.elements) > 1:  
 #   Do the defendants or respondents have a lawyer?
 #   % else:
 #   Does the defendant or respondent have a lawyer?
 #   % endif
 #   % else: 
 #   % if len(other_parties.elements) > 1:  
 #   Do the plaintiffs or petitioners have a lawyer?
 #   % else:
 #   Does the plaintiff or petitioner have a lawyer?
 #   % endif
 #   % endif
 # fields:
 #   - no label: defendants_attorney.there_are_any
 #     datatype: yesnoradio
 #     show if: 
 #       code: |  
 #         users == plaintiffs
 #   - no label: plaintiffs_attorney.there_are_any
 #     datatype: yesnoradio
 #     show if: 
 #       code: |  
 #         users == defendants
 # ---
id: other party has attorney
question: |
  % if user_started_case:
  % if len(other_parties.complete_elements()) > 1:
  Do the defendants or respondents have a lawyer?
  % else:
  Does the defendant or respondent have a lawyer?
  % endif
  % else:
  % if len(other_parties.complete_elements()) > 1:
  Do the plaintiffs or petitioners have a lawyer?
  % else:
  Does the plaintiff or petitioner have a lawyer?
  % endif
  % endif
subquestion: |
  This information would be on court documents you have from the case. Look at the most recent document you have to get the most up-to-date information. A party can hire a lawyer at any point in the case.
fields:
  - no label: other_party_attorney.target_number
    input type: radio
    datatype: integer
    choices:
      - No, they don't have a lawyer.: 0
      - Yes, they have 1 lawyer.: 1
      - Yes, they have multiple lawyers.: 2
    show if: 
      code: |  
        len(other_parties) > 1
  - no label: other_party_attorney.target_number
    input type: radio
    datatype: integer
    choices:
      - No, they don't have a lawyer.: 0
      - Yes, they have a lawyer.: 1
    show if: 
      code: |  
        len(other_parties) <= 1
  - note: |
      NOTE: This tool **cannot** put multiple lawyers on the form.  If you want to include more than one lawyer, you will need to write them in neatly yourself.  
    show if:
      variable: other_party_attorney.target_number
      is: 2
---
id: lawyer is shared by all plaintiffs
question: |
  Do all the plaintiffs or petitioners share the same lawyer?
fields:
  - no label: other_party_share_lawyer
    datatype: radio
    choices:
      - No, the lawyer only represents some of them.: False
      - Yes, they all have the same lawyer.: True
  - note: |
      Because they do not all share the same lawyer, you will need to write the lawyer's information on the form yourself. We will give you instructions.
    show if:
      variable: other_party_share_lawyer
      is: False
---
id: lawyer is shared by all defendants
question: |
  Do all the defendants or respondents all share the same lawyer?
fields:
  - no label: other_party_share_lawyer
    datatype: radio
    choices:
      - No, the lawyer only represents some of them.: False
      - Yes, they all have the same lawyer.: True
  - note: |
      Because they do not all share the same lawyer, you will need to write the lawyer's information on the form yourself. We will give you instructions.
    show if:
      variable: other_party_share_lawyer
      is: False
---
id: docket number
question: |
  What is your case number?
subquestion: |
  Enter the full case number including the two-letter case-type code. You can find the case number at the top of other documents from your case such as the summons, complaint, petition, or answer.
fields:
  #  removed option to not give case number
  # - I don't know the docket number: dont_know_docket_number
  #   datatype: yesno    
  - no label: docket_number
    maxlength: 25
  #  hide if: dont_know_docket_number
---
if: |
  has_hearing_info == True
id: Judge information
question: |
  What judge will hear your motion?
subquestion: |
  What is the name and bar number (or "P-Number") of the judge who will hear this motion?
fields:
  - "Judge's name": judge.name
    maxlength: 35
    required: False
  - "Judge's bar number": trial_court_bar_number
    maxlength: 7
    required: False
---
if: user_ask_role == "plaintiff"
id: multiple other parties when user plaintiff
question: |
  How many defendants or respondents are there in this case?
subquestion: |
  These are the parties on the "other side" of the case from you.
fields:
  - How many plaintiffs or petitioners are there?: other_parties.target_number
    datatype: integer
---
id: multiple other parties when user defendant
question: |
  How many plaintiffs or petitioners are there in this case?
subquestion: |
  These are the parties on the "other side" of the case from you.

  There should be at least one.
fields:
  - How many plaintiffs or petitioners are there?: other_parties.target_number
    datatype: integer
    min: 1
    validation messages:
      min: |
        There should be someone on the other side of your case.
---
id: other Attorney bar number
question: |
  ${ other_party_attorney }'s Bar Number
subquestion: |
  ${ collapse_template(help_user_find_bar_number_template) }
fields:
  - label: |
        % if user_started_case:
        Defendant's or Respondent's lawyer's bar number
        % else:
        Plaintiff's or Petitioner's lawyer's bar number
        % endif
    field: other_party_attorney[i].bar_number
    maxlength: 7
---
template: help_user_find_bar_number_template
subject: |
  How can I find a lawyer's bar number?
content: |
  The lawyer's bar number is a five digit number after the letter P, usually listed after the lawyer's name. For example: P12345.  
---
id: user phone number
question: |
  What is your phone number?
subquestion: |
  Write "none" if you have no phone number.
fields:  
  - Phone number: users[0].phone_number
    required: True
    maxlength: 20
---
id: Motion Title
question: |
  Motion Title
subquestion: |
  Fill in the blank below with the title of your motion. This must be short and fit on one line. It should briefly tell the judge what you are asking for. 
  
  A motion is a document you use to ask the judge to do something. If you are having trouble deciding what to name the motion, think of the word “Motion” as meaning “I want to ask the judge” For example, if you are getting divorced and want to waive the waiting period you might  say “I want to ask the judge to waive the statutory waiting period.” In that situation the motion title could be “Motion to Waive the Statutory Waiting Period.”
under: |  
  If you are not sure of the title you can leave this blank and neatly write it by hand before you file it in court.
fields:
  - "Motion Title": motion_title
    maxlength: 60
    required: False
---
id: Your Motion
question: |
  Your Motion
subquestion: |
  A motion is a written request to a judge. A motion must have a written statement that gives the judge reasons why they should do what you are asking. 
  
  Whether or not the judge grants your motion will depend on the facts and the laws that apply in your case. Your motion will be more persuasive if you are very clear about what you are asking for and give good legal support for your request. Here are a few ways to write a good motion:
  
  * **Start and end by directly asking for what you want**. For example, you could start by saying: “I request that the court waive the waiting period in my divorce.” After writing the support for your request you could end by saying: “For all of the reasons listed above, I respectfully request that the court waive the waiting period in my divorce.”
  * **Be brief**. Give good reasons why the judge should do what you are asking but make sure that you stay focused on the specific issues related to the request.
  * **Include attachments if they support your arguments**. If you have a document or photo that supports a statement you make, you can attach an exhibit. For example, you could write: “My spouse has been physically abusive and I got a Personal Protection Order in 2019. See Exhibit A.” If you reference any exhibits in your motion be sure to label and attach them to your finished forms before filing in court. In the example here you would clearly write “Exhibit A” on a copy of the 2019 protection order and attach it to the motion.
  * **Do your best to understand what rules the judge will follow when deciding your motion**. For example, if the law says that the judge can grant a motion in your case if you show a change in circumstances, be sure to explain the change in circumstances. If the court rules say you must show good cause, explain the good cause. It is a good idea to use those specific words. For example, if you need to show good cause, say “There is good cause because…”
  * **Do not include any personal identifying information**. Personal identifying information includes: date of birth, social security or national identification number, driver’s license or state identification number, passport number, and financial account numbers. If a court rule or law requires you to include this information or if the information is necessary for identification purposes you must fill out form [MC 97](https://www.courts.michigan.gov/siteassets/forms/scao-approved/mc97.pdf) (if the information is related to a defendant, respondent, or decedent) or form [MC 97a](https://www.courts.michigan.gov/siteassets/forms/scao-approved/mc97a.pdf) (if the information is about a plaintiff, petitioner, or anyone else not included in MC 97). Include the information on MC 97 and do not include it in the Motion. Instead, include a reference in the Motion to ask the judge to see MC 97 for the information.
  
  Use the space below to tell the judge what you want and to give reasons for it. If you can't finish writing what you want to say right now, go to the menu at the top of the screen and click "Sign up or sign in to save answers".  If you are already signed in, click "Next" to save your work. 
fields:
  - "Your motion": motion_body
    input type: area
    rows: 12
    hint: Type your motion here.
    # maxlength: 1209 [took out maxlength because added overflow field]
under: |  
  **Careful!** If you click "Undo," you will lose what you have typed here.
---
id: Do you know hearing time and place
question: |
  Motion Hearing Information
subquestion: |
  Have you already contacted the court to find out:
  
  * when the hearing will be
  * where the hearing will be, and
  * what judge will run the hearing?
under: |  
 **For most people, the answer will be no.**  
 
 Most people will get the judge and hearing information **after** they file this motion with the court.  We will give you more instructions when you finish this tool.
buttons:
  - Yes:
      code: |
        has_hearing_info = True
  - No:
      code: |
        has_hearing_info = False
        undefine('judge.name', 'trial_court_bar_number', 'hearing_time', 'hearing_date', 'hearing_at_court', 'hearing_address_on_one_line')
---
if: |
  has_hearing_info == True
id: When will the hearing be
question: |
  When will the hearing be?
fields:
  - "Date of hearing": hearing_date
    datatype: date
    required: False
    min: ${ today() }
  - "Hearing Time": hearing_time
    maxlength: 13
    required: False
    #removed "time" datatype due to failure on some older Androids and weird interface.
---
if: |
  has_hearing_info == True
id: Will the hearing be held at the courthouse
question: |
  Where will the hearing be?
# buttons:
#  - Yes:
#      code: |
#        hearing_at_court = True
#        undefine('hearing_address_on_one_line')
#  - No:
#      code: |
#        hearing_at_court = False
fields:
  - "Will the hearing be in person at the courthouse?": hearing_at_court
    datatype: yesnoradio
    required: False
  - "* Type the address if it will be at a physical location. * If the hearing will be online or by phone, briefly explain.": hearing_address_on_one_line
    show if: 
      variable: hearing_at_court 
      is: False  
    maxlength: 50 
# ---
#  # if modifier is needed to make this work as followup question on review screen
# if: |
#   hearing_at_court == False
# id: What is the address for the hearing
# question: |
#   Where will the hearing be?
# subquestion: |
#   * Type the address if it will be at a physical location.
#   * If the hearing will be online or by phone, briefly explain.
# fields:
#   - "Address of the hearing": hearing_address_on_one_line
#     maxlength: 50
#     required: False
---
id: OK Not to Have Hearing Info
continue button field: no_hearing_info_ok
question: |
  That's fine.
subquestion: |
  You don't need the hearing information yet.  You can fill out the hearing information after you file your motion with the court.  We will give you instructions.
---
id: When will you serve the other party or parties
question: |
  When will you serve the other party or parties?
subquestion: |
  If you are not sure, you can leave this blank and neatly write it by hand before you file it in court.
fields:
  - "Date of Service": service_date
    datatype: date
---
question: |
  Electronic Signature
subquestion: |
  This tool can put "*/s/ ${ users[0] }*" where you would sign your name so you do not have to sign the form by hand. The court will accept this as your signature.

  Would you like to add your electronic signature to your form? 
yesno: esign
---
id: preview simpmotion
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_simpmotion'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: simpmotion_preview_question   
---
# commented out because not using signature field
# code: |
#   signature_fields = ['users.signature_1']
# ---
code: |
  # This is a placeholder for the addresses that will be searched
  # for matching address to court. Edit if court venue is based on 
  # a different address than the user's
  addresses_to_search = [user.address for user in users]
---
continue button field: review_screen_user_side
id: review screen--user side of case
question: |
  Review your information
review:
  - note: |
      **Your name**

        * ${ users[0] }
  - note: |        
      **Your address**

        * ${ users[0].address.on_one_line() }
  - note: |        
      **Your phone number**

        * ${ users[0].phone_number }
  - note: |
      **Party Information**
      
        % if len(users.complete_elements()) == 1:
        * You are the **only** ${ user_label }.
        % else:
        You are a ${ user_label }. The other ${ user_label_plural }s are:

        % for user in users.complete_elements()[1:]:
        * ${ user }
        % endfor
        % endif
  - note: |
      _____________________

      **Check your answers before going on.**
      
      If any of this information is wrong, use the "Undo" button to go back and fix it now. Make sure these answers are correct before you continue.  
---
continue button field: review_screen_other_side
id: review screen--other side of case
question: |
  Review the ${ (other_side_label) } information
review:
  - note: |
      **Number of ${ other_side_label_plural }**

        * len(other_parties)
  - note: |
      **${ capitalize(other_side_label) }'s name**

        * ${ other_parties[0] }
  - note: |        
      **${ other_parties[0] }'s address**

        * ${ other_parties[0].address.block() }
  - note: |        
      **${ other_parties[0] }'s phone number**

        * ${ other_parties[0].phone_number }
  - note: |
      **Number of ${ other_side_label } lawyers**
      
        % if len(other_party_attorney) == 1:
        * 1, There is one ${ other_side_label } lawyer.
        % elif len(other_party_attorney) > 1:
        * 2+, There are at least two ${ other_side_label } lawyers.
        % else:
        * 0, There are no ${ other_side_label } lawyers.
        % endif
    show if: other_parties.there_are_any == True
  - note: |        
      **Does this lawyer work for all the ${ other_side_label_plural }?**

        * ${ capitalize(word(yesno(other_party_share_lawyer))) }
  - note: |
      **Lawyer's name**
      
      ${ other_party_attorney[0] }
  - note: |        
      **${ other_party_attorney[0] }'s address**

        * ${ other_party_attorney[0].address.block() }
  - note: |        
      **${ other_party_attorney[0]}'s phone number**

        * ${ other_party_attorney[0].phone_number }
  - note: |
      _____________________

      **Check your answers before going on.**
      
      If any of this information is wrong, use the "Undo" button to go back and fix it now. Make sure these answers are correct before you continue.  
---
id: simpmotion overall review screen
event: review_simpmotion
question: |
  Review your answers
review:
  - note: |        
      **Party Information**
  - Edit: users.revisit
    button: |
      **Your party: (Edit to change name and address)**

      %  for my_var in users:
        * ${ my_var.name }
      % endfor
  - Edit: users[0].address.address
    button: |
      **Your address:**
      ${ users[0].address.on_one_line() }
  - Edit: users[0].phone_number
    button: |
      **Your Phone Number:**
      ${ users[0].phone_number }
  - Edit:
    - user_ask_role
    - recompute:
      - user_label
      - user_label_plural
      - other_side_label
      - other_side_label_plural
      - plaintiffs
      - defendants
      - plaintiffs_attorney
      - defendants_attorney
    button: |
      **You are a**: ${ user_label }
  - Edit: other_parties.revisit
    button: |
      **The other party: (Edit to change name and address)**
      
      % for my_var in other_parties:
        * ${ my_var.name }
      % endfor
      * If you need to edit the party information, start over or use the "Undo" button to go back. 
      % if defined("motion_body"):
        Make sure you save your motion somewhere else first, so you don't lose your work. 
      % endif
  - Edit: other_party_attorney.revisit
    button: |
      **Number of ${ other_side_label } lawyers**
      
        % if len(other_party_attorney) == 1:
        * 1, There is one ${ other_side_label } lawyer.
        % elif len(other_party_attorney) > 1:
        * 2+, There are at least two ${ other_side_label } lawyers.
        % else:
        * 0, There are no ${ other_side_label } lawyers.
        % endif
  - Edit: other_parties[0].address.address
    button: |
      **${ other_parties[0] }'s address**
      ${ other_parties[0].address.address }
  - Edit: other_parties[0].phone_number
    button: |
      **${ other_parties[0] }'s phone number**
      ${ other_parties[0].phone_number }
  - Edit: 
      - docket_number
      - county_choice
      - court_index
      - recompute:
          - the_court
    button: |
      **Court Case Information**
      
      * **County**:
      ${ county_choice }
      * **Court**:
      ${ the_court.name }
      * **Case number**:
      ${ docket_number }  
  - Edit: 
      - has_hearing_info
      - recompute:
          - has_hearing_info
      - follow up:
        - hearing_date
        - hearing_time
        - hearing_at_court
        - judge.name
        - trial_court_bar_number 
    button: |
      **Hearing Information**

      * Do you already have the time, place, and judge for the hearing?---**${ word(yesno(has_hearing_info)) }**
  - Edit: 
      - hearing_date
      - hearing_time
      - hearing_at_court
    button: |
      **Hearing Time and Place**
      
      % if defined("hearing_date"):
      * **Hearing Date**: ${ hearing_date }
      % endif
      % if defined("hearing_time"):
      * **Hearing Time**: ${ hearing_time }
      % endif
      % if defined("hearing_at_court"):
      * Will the hearing be at the courthouse?---**${ word(yesno(hearing_at_court)) }**
      % endif 
      % if defined("hearing_address_on_one_line"):
      % if hearing_at_court == False:
      * **Hearing Place**: ${ hearing_address_on_one_line }
      % endif
      % endif 
  - Edit: 
      - judge.name
      - trial_court_bar_number 
    button: |
      **Judge for the Hearing**
      
      % if defined("judge.name"):
      * **Judge**: ${ judge.name }
      % endif
      % if defined("trial_court_bar_number"): 
      * **Judge's Bar Number**: ${ trial_court_bar_number }
      % endif
  - Edit: 
      - motion_title
      - motion_body
    button: |
      **Your Motion**
      
      % if defined("motion_title"):
      * **Title**: ${ motion_title }
      % endif
      % if defined("motion_body"):
      * ${ indent(single_to_double_newlines(motion_body)) } 
      % endif
  - Edit:
      - esign
    button: |
      **Your Electronic Signature**
        
      * Do you want to E-Sign these forms?---
      % if esign == True:
      **Yes**
      % else:
      **No**
      % endif
resume button label: Continue interview
---
id: revisit users
question: |
  Edit your answers about yourself and other parties on your side of the case
subquestion: |
  ${ users.table }

  ${ users.add_action() }
continue button field: users.revisit
---
id: revisit other_parties
question: |
  Edit your answers about the parties on the other side of the case
subquestion: |
  ${ other_parties.table }

  ${ other_parties.add_action() }
continue button field: other_parties.revisit
---
id: revisit attorneys
question: |
  Edit your answers about the attorneys on the other side of the case
subquestion: |
  ${ other_party_attorney.table }

  ${ other_party_attorney.add_action() }
continue button field: other_party_attorney.revisit
---
table: users.table
rows: users
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True
---
table: other_parties.table
rows: other_parties
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True
---
table: other_party_attorney.table
rows: other_party_attorney
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - address: |
      row_item.address.on_one_line() if defined("row_item.address.address") else ""
  - phone number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
  - bar number: |
      row_item.bar_number if defined("row_item.bar_number") else ""
edit:
  - name.first
  - address.address
  - phone_number
  - bar_number
confirm: True
---
id: download simpmotion
event: simpmotion_download
question: |
  All done
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_simpmotion'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
---
objects:
  - simpmotion_post_interview_instructions: ALDocument.using(title="Instructions", filename="simpmotion_next_steps.docx", enabled=True, has_addendum=False, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
  #for overflow, set has_addendum = True
  - simpmotion_attachment: ALDocument.using(title="Your Motion", filename="simpmotion.pdf", enabled=True, has_addendum=True, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[simpmotion_post_interview_instructions,simpmotion_attachment], filename="simpmotion.pdf_package.pdf", title="All forms to download for your records", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[simpmotion_attachment], filename="simpmotion.pdf_package.pdf", title="All forms to download for your records", enabled=True)
---
  # overflow--add this atttachment addendum
attachment:
  variable name: simpmotion_attachment.addendum
  docx template file: simpmotion_addendum_template.docx
---
code: |
  # overflow--sets character limit, addendum label, etc.
  simpmotion_attachment.overflow_fields['motion_body'].overflow_trigger=850
  simpmotion_attachment.overflow_fields['motion_body'].label = "Motion (continued)"
  simpmotion_attachment.overflow_fields.gathered=True
---
attachments:
  - name: simpmotion post interview instructions
    filename: Post-interview-instructions     
    variable name: simpmotion_post_interview_instructions[i]        
    skip undefined: True
    docx template file: simpmotion_next_steps.docx
  - name: simpmotion attachment
    filename: simpmotion.pdf     
    variable name: simpmotion_attachment[i]
    skip undefined: True
    pdf template file: simpmotion.pdf
    editable: False
    fields:
      - "trial_court_circuit": |
            % if the_court.type == 'circuit':
            ${ the_court.number }
            % endif
      - "trial_court_district": |
            % if the_court.type == 'district':
            ${ the_court.number }
            % endif
      - "trial_court_county": ${ the_court.address.county }
      - "docket_number": ${ docket_number }
      - "trial_court_address_on_one_line": ${ the_court.address.on_one_line() }
      - "trial_court_phone_number": ${ the_court.phone }
      # removes plaintiff from header if there are multiple user plaintiffs, if plaintiff not user,         won't collect plaintiff name anyway
      - "plaintiffs_name": |
            ${ comma_and_list(plaintiffs) }
      # as above for when defendant is user    
      - "defendants_name": |       
            ${ comma_and_list(defendants) }
      - "plaintiffs_attorney_bar_number": |
            % if len(plaintiffs_attorney) > 0:
            ${ plaintiffs_attorney[0].bar_number }
            % endif
      - "plaintiffs_attorney_name": |
            % if len(plaintiffs_attorney) > 0:
            ${ comma_and_list(plaintiffs_attorney) }
            % elif len(plaintiffs_attorney) == 0:
            Self-represented
            % endif
      - "defendants_attorney_name": |
            % if len(defendants_attorney) > 0:
            ${ comma_and_list(defendants_attorney) }
            % elif len(defendants_attorney) == 0:
            Self-represented
            % endif
      - "defendants_attorney_bar_number": |
            % if len(defendants_attorney) > 0:
            ${ defendants_attorney[0].bar_number }
            % endif
      # uses attorney address as default if there is 1 attorney for all plaintiffs, otherwise uses plaintiff address as default. 
      - "plaintiffs_attorney_address_block": |
            % if len(plaintiffs_attorney) > 0:
            ${ plaintiffs_attorney[0].address.block() }
            % else:
            ${ plaintiffs[0].address.block() }
            % endif
      - "defendants_attorney_address_block": |
            % if len(defendants_attorney) > 0:
            ${ defendants_attorney[0].address.block() }
            % else:
            ${ defendants[0].address.block() }
            % endif
      - "plaintiffs_attorney_phone_number": |
            % if len(plaintiffs_attorney) == 1:
            ${ plaintiffs_attorney[0].phone_number }
            % else:
            ${ plaintiffs[0].phone_number }
            % endif
      - "defendants_attorney_phone_number": |
            % if len(defendants_attorney) == 1:
            ${ defendants_attorney[0].phone_number }
            % else:
            ${ defendants[0].phone_number }
            % endif
      - "motion_title": ${ motion_title }
      - "users_name": ${ users[0] }
      - "trial_court_name": ${ judge.name }
      - "hearing_time": ${ hearing_time }
      - "trial_court_bar_number": ${ trial_court_bar_number }
      - "hearing_date": ${ format_date(hearing_date) }
      - "hearing_at_court_yes": ${ hearing_at_court }
      - "hearing_at_court_no": ${ not hearing_at_court }
      - "hearing_address_on_one_line": |
            % if hearing_at_court == False:
            ${ hearing_address_on_one_line }
            % endif
      # inserts only the "safe" number of characters here, seems to be set via the trigger value, formatting
      - "motion_body": ${ indent(indent(single_to_double_newlines(simpmotion_attachment.safe_value('motion_body', preserve_newlines=True)))) }
      - "signature_date": |
            % if esign == True:
            ${ signature_date }
            % else:
            ${ '' }
            % endif
      # It's a signature: test which file version this is; leave empty unless it's the final version)
      - "users_signature_1": |
            % if esign == True:
            ${ users[0] }
            % else:
            ${ '' }
            % endif
      - "service_date": ${ service_date }
